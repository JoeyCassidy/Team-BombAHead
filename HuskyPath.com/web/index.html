
<!doctype html>
<html>
	<head>

		<!-- Required meta tags -->
		<meta charset="utf-8">
		<title>Login</title>
		<!-- **********************************************
     * TODO(DEVELOPER): Use your Client ID below. *
     ********************************************** -->
		<meta name="google-signin-client_id" content="16768770059-c1bv57iquerqp5rd6bnjt3ode21ffome.apps.googleusercontent.com">
		<meta name="google-signin-cookiepolicy" content="single_host_origin">
		<meta name="google-signin-scope" content="profile email">

		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<meta name="google-signin-client_id" content="293465252453-2ugca6mu50pm9ki42l0cmjcgiua53jlr.apps.googleusercontent.com">
		<!--google-->
		<script src="https://apis.google.com/js/platform.js" async defer></script>
		<!-- firebase-->
		<script src="https://www.gstatic.com/firebasejs/ui/4.5.0/firebase-ui-auth.js"></script>
		<link type="text/css" rel="stylesheet" href="https://www.gstatic.com/firebasejs/ui/4.5.0/firebase-ui-auth.css" />
		<!--absolutely doesnt work (google sign in with firebase script)
		<script type="text/javascript">
			// FirebaseUI config.
			var provider = new firebase.auth.GoogleAuthProvider();
			firebase.auth().signInWithPopup(provider).then(function(result) {
				// This gives you a Google Access Token. You can use it to access the Google API.
				var token = result.credential.accessToken;
				// The signed-in user info.
				var user = result.user;
				// ...
			}).catch(function(error) {
				// Handle Errors here.
				var errorCode = error.code;
				var errorMessage = error.message;
				// The email of the user's account used.
				var email = error.email;
				// The firebase.auth.AuthCredential type that was used.
				var credential = error.credential;
				// ...
			});
			var uiConfig = {
				callbacks: {
					signInSuccessWithAuthResult: function(authResult, redirectUrl) {
						var user = authResult.user;
						var credential = authResult.credential;
						var isNewUser = authResult.additionalUserInfo.isNewUser;
						var providerId = authResult.additionalUserInfo.providerId;
						var operationType = authResult.operationType;
						// Do something with the returned AuthResult.
						// Return type determines whether we continue the redirect automatically
						// or whether we leave that to developer to handle.
						return true;
					},
					signInFailure: function(error) {
						// Some unrecoverable error occurred during sign-in.
						// Return a promise when error handling is completed and FirebaseUI
						// will reset, clearing any UI. This commonly occurs for error code
						// 'firebaseui/anonymous-upgrade-merge-conflict' when merge conflict
						// occurs. Check below for more details on this.
						return handleUIError(error);
					},
					uiShown: function() {
						// The widget is rendered.
						// Hide the loader.
						document.getElementById('loader').style.display = 'none';
					}
				},
				credentialHelper: firebaseui.auth.CredentialHelper.ACCOUNT_CHOOSER_COM,
				// Query parameter name for mode.
				queryParameterForWidgetMode: 'mode',
				// Query parameter name for sign in success url.
				queryParameterForSignInSuccessUrl: 'signInSuccessUrl',
				// Will use popup for IDP Providers sign-in flow instead of the default, redirect.
				signInFlow: 'popup',
				//<url-to-redirect-to-on-success> might be wrong
				signInSuccessUrl: 'localhost:8080/web/views/profile.html',
				signInOptions: [
					// Leave the lines as is for the providers you want to offer your users.
					firebase.auth.GoogleAuthProvider.PROVIDER_ID,
					{
						provider: firebase.auth.EmailAuthProvider.PROVIDER_ID,
						// Whether the display name should be displayed in the Sign Up page.
						requireDisplayName: true
					},
					{
						provider: firebase.auth.PhoneAuthProvider.PROVIDER_ID,
						// Invisible reCAPTCHA with image challenge and bottom left badge.
						recaptchaParameters: {
							type: 'image',
							size: 'invisible',
							badge: 'bottomleft'
						}
					},
					firebaseui.auth.AnonymousAuthProvider.PROVIDER_ID
				],
				// Set to true if you only have a single federated provider like
				// firebase.auth.GoogleAuthProvider.PROVIDER_ID and you would like to
				// immediately redirect to the provider's site instead of showing a
				// 'Sign in with Provider' button first. In order for this to take
				// effect, the signInFlow option must also be set to 'redirect'.
				immediateFederatedRedirect: false,
				// tosUrl and privacyPolicyUrl accept either url string or a callback
				// function.
				// Terms of service url/callback.
				tosUrl: 'localhost:8080/web/views/profile.html',
				// Privacy policy url/callback.
				privacyPolicyUrl: function() {
					window.location.assign('localhost:8080/web/views/profile.html');
				}
			};
			function onSignIn(googleUser) {
				console.log('Google Auth Response', googleUser);
				// We need to register an Observer on Firebase Auth to make sure auth is initialized.
				var unsubscribe = firebase.auth().onAuthStateChanged(function(firebaseUser) {
					unsubscribe();
					// Check if we are already signed-in Firebase with the correct user.
					if (!isUserEqual(googleUser, firebaseUser)) {
						// Build Firebase credential with the Google ID token.
						var credential = firebase.auth.GoogleAuthProvider.credential(
								googleUser.getAuthResponse().id_token);
						// Sign in with credential from the Google user.
						firebase.auth().signInWithCredential(credential).catch(function(error) {
							// Handle Errors here.
							var errorCode = error.code;
							var errorMessage = error.message;
							// The email of the user's account used.
							var email = error.email;
							// The firebase.auth.AuthCredential type that was used.
							var credential = error.credential;
							// ...
						});
					} else {
						console.log('User already signed-in Firebase.');
					}
				});
			}
			// Initialize the FirebaseUI Widget using Firebase.
			var ui = new firebaseui.auth.AuthUI(firebase.auth());
			// The start method will wait until the DOM is loaded.
			ui.start('#firebaseui-auth-container', uiConfig);
		</script>
		-->
		<!-- Bootstrap CSS -->
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

		<style>
			.intro{
				text-align: center;
			}
			.setup{
				color: #10E90D;
			}
			.bbbbb{
				background: url(https://cdn.pixabay.com/photo/2017/03/25/17/55/color-2174045_960_720.png) no-repeat center center; 
				-webkit-background-size: cover;
				-moz-background-size: cover;
				-o-background-size: cover;
				background-size: cover;
			}
			html, body{
				height:100%;
			}
		</style>
	</head>
	<!--temp color-->
	<body class="bbbbb">
		<div class="container-fluid" style="height:100%">
			<div class="row" style="margin-top: 100px;">
				<div class="col-lg-12">
					<div class="row intro">
						<div class="col-lg-3"></div>
						<div class="col-lg-6">
							<div class="jumbotron jumbotron-fluid rounded border border-dark shadow p-3 mb-5 bg-white" style="color: #FFFFFF">
								<h1 style="color: black">Welcome to Husk Path</h1>
								<h3 style="color: black">Login to get started</h3>
								<img src="https://cdn.pixabay.com/photo/2016/03/31/15/34/arrow-1293397_960_720.png" width="100" height="100"> 
								<h1> </h1>
								<!-- Old code for href button:
								<button type="button" class="btn btn-primary" onclick="location.href='<?php echo $loginURL?>';">"google sign in"</button>-->
								<!--<button class="g-signin2" data-onsuccess="onSignIn" onclick="location.href='/profile'"></button>-->
								<!-- Add where you want your sign-in button to render -->
								<!-- Use an image that follows the branding guidelines in a real app -->
								<!--<button id="signinButton">Sign in with Google</button>-->

								<div id="firebaseui-auth-container">
									<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#signIn">sign in</button>
									<button type="button" class="btn btn-secondary" data-toggle="modal" data-target="#signUp">sign up</button>

									<button type="button" onclick="location.href='/result'">this</button>
									<div class="g-signin2" data-onsuccess="onSignIn" data-theme="dark"></div>
								</div>
							</div>
						</div>
						<div class="col-lg-3"></div>
					</div>
				</div>
			</div>
			<!-- login modal -->
			<div id="signUp" class="modal" tabindex="-1" role="dialog">
				<div class="modal-dialog" role="document">
					<div class="modal-content">
						<div class="modal-header">
							<h5 class="modal-title">Sign up</h5>
							<button type="button" class="close" data-dismiss="modal" aria-label="Close">
								<span aria-hidden="true">&times;</span>
							</button>
						</div>
						<div class="modal-body">
							<p>Don't forget to make your password secure!</p>
							<form id="signUpForm">
								<div class="form-group">
									<label for="emailInput-signUp">Email address</label>
									<input type="email" class="form-control" id="emailInput-signUp" placeholder="example@site.com" required/>
								</div>
								<div class="form-group">
									<label for="passwordInput-signUp">Choose a password</label>
									<input type="password" class="form-control" id="passwordInput-signUp" placeholder="password" required/>
								</div>
							</form>
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-primary" onclick="signUp()">Sign up</button>
							<button type="button" class="btn btn-secondary" data-dismiss="modal" onclick="clearForm('signUpForm')">Close</button>
						</div>
					</div>
				</div>
			</div>

			<div id="signIn" class="modal" tabindex="-1" role="dialog">
				<div class="modal-dialog" role="document">
					<div class="modal-content">
						<div class="modal-header">
							<h5 class="modal-title">Sign in</h5>
							<button type="button" class="close" data-dismiss="modal" aria-label="Close">
								<span aria-hidden="true">&times;</span>
							</button>
						</div>
						<div class="modal-body">
							<p>Welcome back!</p>
							<form id="signInForm">
								<div class="form-group">
									<label for="emailInput-signIn">Your email address</label>
									<input type="email" class="form-control" id="emailInput-signIn" placeholder="example@site.com" required>
								</div>
								<div class="form-group">
									<label for="passwordInput-signIn">Your password</label>
									<input type="password" class="form-control" id="passwordInput-signIn" placeholder="password" required>
								</div>
							</form>
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-primary" onclick="signIn()">Sign in</button>
							<button type="button" class="btn btn-secondary" data-dismiss="modal" onclick="clearForm('signInForm')">Close</button>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- The core Firebase JS SDK is always required and must be listed first -->
		<script src="https://www.gstatic.com/firebasejs/7.14.0/firebase-app.js"></script>

		<!-- Insert these scripts at the bottom of the HTML, but before you use any Firebase services -->


		<!-- If you enabled Analytics in your project, add the Firebase SDK for Analytics -->
		<script src="https://www.gstatic.com/firebasejs/7.14.0/firebase-analytics.js"></script>

		<!-- Add Firebase products that you want to use -->
		<script src="https://www.gstatic.com/firebasejs/7.14.0/firebase-auth.js"></script>
		<script src="https://www.gstatic.com/firebasejs/7.14.0/firebase-firestore.js"></script>
		<!-- Optional JavaScript -->
		<!-- jQuery first, then Popper.js, then Bootstrap JS -->
		<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
		<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
		<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
		<script src="views/javascript/auth.js"></script>
	</body>
</html>